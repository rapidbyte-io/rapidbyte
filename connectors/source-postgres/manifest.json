{
    "manifest_version": "1.0",
    "id": "rapidbyte/source-postgres",
    "name": "PostgreSQL Source",
    "version": "0.1.0",
    "description": "Reads data from PostgreSQL tables using streaming queries",
    "protocol_version": "2",
    "artifact": {
        "entry_point": "source_postgres.wasm"
    },
    "permissions": {
        "network": {
            "allow_runtime_config_domains": true
        },
        "env": {
            "allowed_vars": ["PGSSLROOTCERT"]
        }
    },
    "roles": {
        "source": {
            "supported_sync_modes": ["full_refresh", "incremental"],
            "features": []
        }
    },
    "config_schema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "required": ["host", "user", "database"],
        "properties": {
            "host": { "type": "string", "description": "Database hostname" },
            "port": { "type": "integer", "default": 5432 },
            "user": { "type": "string" },
            "password": { "type": "string" },
            "database": { "type": "string" },
            "schema": { "type": "string", "default": "public" }
        }
    }
}
